{% extends "site.html" %}

{% block extra_link_types %}
    {% if page.has_previous %}
    <link rel="prev" href="http://{{host}}{% url chronam_search_titles_results %}{{previous_url}}" />
    {% endif %}
    {% if page.has_next %}
    <link rel="next" href="http://{{host}}{% url chronam_search_titles_results %}{{next_url}}" />
    {% endif %}
    <link rel="alternate" type="application/atom+xml" link="http://{{host}}{% url chronam_search_titles_results %}?{{q}}&amp;page={{page.number}}&amp;format=atom" />
    <link rel="alternate" type="application/json" link="http://{{host}}{% url chronam_search_titles_results %}?{{q}}&amp;page={{page.number}}&amp;format=json" />
{% endblock %}

{% block box_right %}


  <div id="searchnav">
     <div class="pageNavigator">
      Your title search returned {{ paginator.count }} results <br />

      Sort by: 

      {% ifequal sort 'relevance' %}
      Relevance | 
      {% else %}
      <a href="?{{q}}&amp;sort=relevance&page={{page.number}}">Relevance</a>
      |
      {% endifequal %}

      {% ifequal sort 'state' %}
      State |
      {% else %}
      <a href="?{{q}}&amp;sort=state&page={{page.number}}">State</a> | 
      {% endifequal %}

      {% ifequal sort 'title' %}
      Title |
      {% else %}
      <a href="?{{q}}&amp;sort=title&page={{page.number}}">Title</a> | 
      {% endifequal %}

      {% ifequal sort 'date' %}
      Date 
      {% else %}
      <a href="?{{q}}&amp;sort=date&page={{page.number}}">Date</a>
      {% endifequal %}

  {% ifnotequal paginator.num_pages 1 %}
      <br />
      <img src="{{script_name}}/images/arrow_bl.gif" width="9" height="9" alt=""/> 
      {% if page.has_previous %}
      <a rel="prev" href="{{previous_url}}">Previous</a>
      {% else %}
      Previous
      {% endif %}
      | 
      {% for page_number in page_range_short %}
      {% ifequal page_number "..." %}
      ...
      {% else %}

      {% ifequal page_number page.number %}
      <span class="off">{{page_number}}</span> 
      {% else %}
      <a href="{% url chronam_search_titles_results%}?{{q}}&amp;page={{page_number}}&amp;sort={{sort}}">{{page_number}}</a> 
      {% endifequal %}

      {% endifequal %}
      {% endfor %}
      | 
      {% if page.has_next %}
          <a rel="next" href="{{next_url}}">Next</a> 
      {% else %}
          <span class="off">Next</span> 
      {% endif %}
      <img src="{{script_name}}/images/arrow.gif" width="9" height="9" alt=""/> 
      &nbsp;&nbsp;&nbsp;
      <form action="" method="GET" style="display: inline;">
          <span style="white-space: nowrap;">Jump to page: <input type="text" name="page" value="{{page.number}}" size="6" /></span>
          <input type="hidden" name="year1" value="{{query.year1}}" />
          <input type="hidden" name="year2" value="{{query.year2}}" />
          <input type="hidden" name="terms" value="{{query.terms}}" />
          <input type="hidden" name="frequency" value="{{query.frequency}}" />
          <input type="hidden" name="language" value="{{query.language}}" />
          <input type="hidden" name="ethnicity" value="{{query.ethnicity}}" />
          <input type="hidden" name="labor" value="{{query.labor}}" />
          <input type="hidden" name="lccn" value="{{query.lccn}}" />
          <input type="hidden" name="materialType" value="{{query.materialType}}" />
          <input type="hidden" name="state" value="{{query.state}}" />
          <input type="hidden" name="county" value="{{query.county}}" />
          <input type="hidden" name="city" value="{{query.city}}" />
          <input type="hidden" name="sort" value="{{query.sort}}" />
      </form>
      <br/>
{% endifnotequal %}
    </div>
  </div>



    {% ifequal paginator.count 0 %}
    <h2>No Results</h2>
    {% else %}
    <div id="search_results_box">
        <div id="search_results_content">
        <table class="data" width="100%">
        {% for title in page.object_list %}
        <tr class="{% cycle 'lightGray' 'white' %}">
            <td>
                <a href="{% url chronam_title title.lccn %}">{{title}}</a>
                {% if title.has_non_english_language %}
                <br />
                Languages:
                {{ title.languages.all|join:", " }}
                {% endif %}
            </td>
        </tr>
        {% endfor %}
        </table>
        </div>
    </div>
    {% endifequal %}

{% endblock %}
